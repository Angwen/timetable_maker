"""making the blank schedule table"""

orarend = [] # the whole schedule table itself

first_row = []  # creating lists for rows
first_slot = []
second_slot = []
third_slot = []
fourth_slot = []

orarend.append(first_row) # assigning row lists to the schedule table
orarend.append(first_slot)
orarend.append(second_slot)
orarend.append(third_slot)
orarend.append(fourth_slot)

first_row.append("Időpont") # defining column names
first_row.append("Hétfő")
first_row.append("Kedd")
first_row.append("Szerda")
first_row.append("Csütörtök")
first_row.append("Péntek")

for row in orarend: # creating index for time slot assignment
        if row != first_row:
                row.append(["Lyukasóra"])

first_slot[0] = "8:00 - 8:45"
second_slot[0] = "9:00 - 9:45"
third_slot[0] = "10:00 - 10:45"
fourth_slot[0] = "11:00 - 11:45"
	
for row in orarend: # assign filler to blank spaces
        if row != first_row:
                for i in range(0,5):
                        row.append("Lyukasóra")

"""asking user for number and names of classes"""

class_numbers = [] # lists for calculating sum and changing nonlocal variables
class_names = []
count = []

def get_input(name_of_class, number_of_class): # function for getting input and checking input type
    trials = 1
    while trials > 0:
        name_of_class = input("Tantárgy neve:")
        if name_of_class.isnumeric() == False:
            class_names.append(name_of_class)
            count.append(1)
            trials -= 1
        else:
            print("Érvénytelen adat!")
    trials2 = 1
    while trials2 > 0:
        number_of_class = input(name_of_class + "órák száma a héten:")
        if number_of_class.isnumeric() == True:
            class_numbers.append(int(number_of_class))
            trials2 -= 1
        else:
            print("Érvénytelen adat!")
    return name_of_class


def count_total(numbers): # function for calculating the index for variable values from nonlocal lists
    total = 0
    for number in numbers:
        total += number
    return total - 1
count_sum = count_total(count) # variable storing the index for variable values from nonlocal lists

# assigning nonlocal values with the help of the function and nonlocal lists
class_name1 = "" # creating blank variables
nr_class1 = 0
get_input(class_name1, nr_class1) # calling function
class_name1 = class_names[count_sum] # assigning created values to the variables
nr_class1 = class_numbers[count_sum]

class_name2 = ""
nr_class2 = 0
get_input(class_name2, nr_class2)
class_name2 = class_names[count_sum]
nr_class2 = class_numbers[count_sum]

class_name3 = ""
nr_class3 = 0
get_input(class_name3, nr_class3)

class_name3 = class_names[count_sum]
nr_class3 = class_numbers[count_sum]

def classes_total(classes): # function for calculating total number of classes
    total = 0
    for i in classes:
        total += i
    return total
    
sum_of_classes = classes_total(class_numbers) # variable storing total number of classes

print("A héten a %sórák száma %s, a %sórák száma %s, \
a %sórák száma pedig %s. Ez összesen %s óra." \
% (class_name1, nr_class1, class_name2, nr_class2, \
class_name3, nr_class3, sum_of_classes))


"""assigning classes to empty slots"""

def assign_class(number_of_class, name_of_class): # function for assigning a given number of classes to empty slots
        for timeslot in range(1,5):
                for day in range(1,6):
                        for row in orarend:
                                while number_of_class > 0 and orarend[timeslot][day] == "Lyukasóra":
                                        orarend[timeslot][day] = name_of_class
                                        number_of_class -= 1

assign_class(nr_class1, class_name1)
assign_class(nr_class2, class_name2)
assign_class(nr_class3, class_name3)


"""printing the schedule table"""

for row in orarend:
        for i in row:
                print(i, end=" ")

print("Az órarendet az orarend.csv fájlban találod.")                               

"""printing the schedule table into a csv file"""

import csv

output = csv.writer(open("orarend.csv", "w"), delimiter=';',lineterminator='\n') # the name of the output file variable
for row in orarend:
        output.writerow(row)
